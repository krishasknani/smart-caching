<!DOCTYPE html>
<html>
<head>
    <title>Render Test</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        iframe { width: 100%; height: 500px; border: 2px solid #333; margin: 10px 0; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ddd; }
        button { padding: 10px; margin: 5px; }
    </style>
</head>
<body>
    <h1>Chrome Extension Rendering Test</h1>
    
    <div class="test-section">
        <h2>Direct Server Access</h2>
        <p>This iframe loads the page directly from the server:</p>
        <iframe id="direct" src="http://localhost:3000/cached/ca2a26fcd44c952c/"></iframe>
    </div>
    
    <div class="test-section">
        <h2>Console Testing</h2>
        <p>Open Chrome DevTools (F12) and run these commands:</p>
        <pre>
// Check if CSS is loading
document.querySelector('#direct').contentDocument.querySelectorAll('link[rel="stylesheet"]').forEach(link => {
    console.log('CSS:', link.href, link.sheet ? '✅ Loaded' : '❌ Failed');
});

// Check if scripts are loading
document.querySelector('#direct').contentDocument.querySelectorAll('script[src]').forEach(script => {
    console.log('JS:', script.src, script.readyState || 'checking...');
});

// Check computed styles
const body = document.querySelector('#direct').contentDocument.body;
console.log('Body font-family:', getComputedStyle(body).fontFamily);
console.log('Body background:', getComputedStyle(body).backgroundColor);
        </pre>
    </div>
    
    <div class="test-section">
        <h2>Base URL Context</h2>
        <button onclick="checkBaseUrl()">Check Base URL</button>
        <div id="baseurl-output"></div>
    </div>
    
    <script>
        function checkBaseUrl() {
            const iframe = document.getElementById('direct');
            const iframeDoc = iframe.contentDocument;
            const output = document.getElementById('baseurl-output');
            
            output.innerHTML = `
                <p>Document URL: ${iframeDoc.URL}</p>
                <p>Document baseURI: ${iframeDoc.baseURI}</p>
                <p>Has base tag: ${iframeDoc.querySelector('base') ? 'Yes' : 'No'}</p>
            `;
        }
    </script>
</body>
</html>
